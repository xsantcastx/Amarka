<section class="bg-ts-bg min-h-screen">
  <!-- Premium Page Header -->
  <app-page-header
    title="contact.title"
    subtitle="contact.subtitle"
    [breadcrumbs]="breadcrumbs"
    badgeText="contact.badge"
    icon="contact"
    variant="featured">
  </app-page-header>

  <div class="page-container section-gap">
    <div class="contact-layout">
      <!-- Contact Form -->
      <div class="contact-form-card">
        <div class="contact-form-header">
          <h2 class="contact-form-title font-serif">{{ 'contact.form.title' | translate }}</h2>
          <p class="contact-form-subtitle">{{ 'contact.form.subtitle' | translate }}</p>
        </div>

        <!-- Success Message -->
        @if (submitSuccess) {
          <div class="contact-alert contact-alert--success">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
            <span>{{ 'contact.form.success' | translate }}</span>
          </div>
        }

        <!-- Error Message -->
        @if (submitError) {
          <div class="contact-alert contact-alert--error">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <span>{{ submitErrorMessage || ('contact.form.error' | translate) }}</span>
          </div>
        }

        <form [formGroup]="contactForm" (ngSubmit)="onSubmit()" class="contact-form">
          <div class="contact-form-grid">
            <!-- Name -->
            <div class="contact-field">
              <label for="nombre" class="contact-label">{{ 'contact.form.name' | translate }} *</label>
              <input type="text" id="nombre" formControlName="nombre"
                class="contact-input"
                [class.contact-input--error]="isFieldInvalid('nombre')"
                [class.contact-input--valid]="isFieldValid('nombre')">
              @if (getFieldError('nombre')) {
                <p class="contact-error">{{ getFieldError('nombre') }}</p>
              }
            </div>

            <!-- Email -->
            <div class="contact-field">
              <label for="email" class="contact-label">{{ 'contact.form.email' | translate }} *</label>
              <input type="email" id="email" formControlName="email"
                class="contact-input"
                [class.contact-input--error]="isFieldInvalid('email')"
                [class.contact-input--valid]="isFieldValid('email')">
              @if (getFieldError('email')) {
                <p class="contact-error">{{ getFieldError('email') }}</p>
              }
            </div>

            <!-- Phone -->
            <div class="contact-field">
              <label for="telefono" class="contact-label">{{ 'contact.form.phone' | translate }} *</label>
              <input type="tel" id="telefono" formControlName="telefono" (input)="formatPhoneNumber($event)"
                class="contact-input"
                [class.contact-input--error]="isFieldInvalid('telefono')"
                [class.contact-input--valid]="isFieldValid('telefono')">
              @if (getFieldError('telefono')) {
                <p class="contact-error">{{ getFieldError('telefono') }}</p>
              }
            </div>

            <!-- Company -->
            <div class="contact-field">
              <label for="empresa" class="contact-label">{{ 'contact.form.company' | translate }}</label>
              <input type="text" id="empresa" formControlName="empresa" class="contact-input">
            </div>

            <!-- Event Date -->
            <div class="contact-field">
              <label for="eventDate" class="contact-label">{{ 'contact.form.date' | translate }}</label>
              <input type="text" id="eventDate" formControlName="eventDate" placeholder="MM / DD / YYYY"
                class="contact-input">
            </div>

            <!-- Location -->
            <div class="contact-field">
              <label for="location" class="contact-label">{{ 'contact.form.location' | translate }}</label>
              <input type="text" id="location" formControlName="location" [placeholder]="'contact.form.location_placeholder' | translate"
                class="contact-input">
            </div>

            <!-- Quantity -->
            <div class="contact-field">
              <label for="guestCount" class="contact-label">{{ 'contact.form.quantity' | translate }}</label>
              <input type="text" id="guestCount" formControlName="guestCount" [placeholder]="'contact.form.quantity_placeholder' | translate"
                class="contact-input">
            </div>

            <!-- Budget -->
            <div class="contact-field">
              <label for="budget" class="contact-label">{{ 'contact.form.budget' | translate }}</label>
              <input type="text" id="budget" formControlName="budget" placeholder="e.g., $500 - $2,000"
                class="contact-input">
            </div>
          </div>

          <!-- Message -->
          <div class="contact-field contact-field--full">
            <label for="mensaje" class="contact-label">{{ 'contact.form.message' | translate }} *</label>
            <textarea id="mensaje" formControlName="mensaje" rows="5"
              [placeholder]="'contact.form.message_placeholder' | translate"
              class="contact-input contact-textarea"
              [class.contact-input--error]="isFieldInvalid('mensaje')"
              [class.contact-input--valid]="isFieldValid('mensaje')"></textarea>
            @if (getFieldError('mensaje')) {
              <p class="contact-error">{{ getFieldError('mensaje') }}</p>
            }
          </div>

          <!-- Privacy Checkbox -->
          <div class="contact-checkbox">
            <input type="checkbox" id="privacidad" formControlName="aceptarPrivacidad"
              class="contact-checkbox-input">
            <label for="privacidad" class="contact-checkbox-label">
              {{ 'contact.form.privacy' | translate }}
            </label>
          </div>
          @if (contactForm.get('aceptarPrivacidad')?.errors?.['required'] && contactForm.get('aceptarPrivacidad')?.touched) {
            <p class="contact-error">{{ 'contact.form.privacy_required' | translate }}</p>
          }

          <!-- Submit Button -->
          <button type="submit" [disabled]="isSubmitting" class="btn btn--primary contact-submit">
            @if (!isSubmitting) {
              <span>{{ 'contact.form.submit' | translate }}</span>
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
              </svg>
            } @else {
              <span class="contact-submit-loading">
                <svg class="w-5 h-5 animate-spin" fill="none" viewBox="0 0 24 24">
                  <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                  <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                <span>{{ 'contact.form.submitting' | translate }}</span>
              </span>
            }
          </button>
        </form>
      </div>

      <!-- Contact Information -->
      <div class="contact-info">
        <!-- Direct Contact Card -->
        <div class="contact-info-card">
          <h2 class="contact-info-title font-serif">{{ 'contact.info.title' | translate }}</h2>
          <p class="contact-info-subtitle">{{ 'contact.info.subtitle' | translate }}</p>

          <div class="contact-info-list">
            <!-- Location -->
            <div class="contact-info-item">
              <div class="contact-info-icon">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17.657 16.657L13.414 20.9a2 2 0 01-2.828 0l-4.243-4.243a8 8 0 1111.314 0z"></path>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                </svg>
              </div>
              <div class="contact-info-content">
                <h3 class="contact-info-label">{{ contactAddress || 'Service Area' }}</h3>
                <p class="contact-info-text">{{ 'contact.info.location_text' | translate }}</p>
              </div>
            </div>

            <!-- Phone -->
            <div class="contact-info-item">
              <div class="contact-info-icon">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                </svg>
              </div>
              <div class="contact-info-content">
                <h3 class="contact-info-label">{{ 'contact.info.phone' | translate }}</h3>
                @if (contactPhone) {
                  <a [href]="'tel:' + contactPhone" class="contact-info-link">{{ contactPhone }}</a>
                  @if (whatsappNumber) {
                    <a [href]="getWhatsAppUrl()" target="_blank" class="contact-info-link contact-info-link--accent">
                      {{ 'contact.info.whatsapp' | translate }}
                    </a>
                  }
                } @else {
                  <p class="contact-info-text">{{ 'contact.info.not_available' | translate }}</p>
                }
              </div>
            </div>

            <!-- Email -->
            <div class="contact-info-item">
              <div class="contact-info-icon">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                </svg>
              </div>
              <div class="contact-info-content">
                <h3 class="contact-info-label">{{ 'contact.info.email_label' | translate }}</h3>
                @if (contactEmail) {
                  <a [href]="'mailto:' + contactEmail" class="contact-info-link contact-info-link--accent">{{ contactEmail }}</a>
                } @else {
                  <p class="contact-info-text">{{ 'contact.info.not_available' | translate }}</p>
                }
              </div>
            </div>

            <!-- Hours -->
            <div class="contact-info-item">
              <div class="contact-info-icon">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
              </div>
              <div class="contact-info-content">
                <h3 class="contact-info-label">{{ 'contact.info.hours' | translate }}</h3>
                <p class="contact-info-text">{{ 'contact.info.hours_weekday' | translate }}<br>{{ 'contact.info.hours_weekend' | translate }}</p>
              </div>
            </div>
          </div>
        </div>

        <!-- WhatsApp CTA -->
        @if (whatsappNumber) {
          <div class="contact-whatsapp-cta">
            <h3 class="contact-whatsapp-title font-serif">{{ 'contact.whatsapp.title' | translate }}</h3>
            <p class="contact-whatsapp-text">{{ 'contact.whatsapp.text' | translate }}</p>
            <a [href]="getWhatsAppUrl()" target="_blank" class="btn btn--primary">
              <span>{{ 'contact.whatsapp.button' | translate }}</span>
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
              </svg>
            </a>
          </div>
        }

        <!-- Trust Badges -->
        <div class="contact-trust">
          <div class="contact-trust-item">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
            </svg>
            <span>{{ 'contact.trust.secure' | translate }}</span>
          </div>
          <div class="contact-trust-item">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
            </svg>
            <span>{{ 'contact.trust.fast' | translate }}</span>
          </div>
          <div class="contact-trust-item">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
            </svg>
            <span>{{ 'contact.trust.crafted' | translate }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
